var SimpleAjax=window.SimpleAjax||(function(S){var l={};var m=(function(){var c={};return function(s){return!s?"":c[s]||(c[s]=s.toLowerCase())}})();var r=function(s){var n=document.createElement("div");n.innerHTML=s;return n.firstChild};var t=function(s){var d=document;return!s?s:s.nodeType?s:d.getElementById?d.getElementById(s):d.all(s)};S.css=function(n){var w=window.defaultView;S.css=(w&&w.getComputedStyle)?function(n){return w.getComputedStyle(n,null)}:function(n){return n.currentStyle||n.style};return S.css(n)};S.register=function(a,c,d,e,f){if(!l[a]){l[a]={};var b=document;b=b.documentElement||b.body;if(b.addEventListener){b.addEventListener(a.replace(/^on/,""),S.onEvent,false)}else{b.attachEvent(a,S.onEvent)}}if(!l[a][c]){l[a][c]=[]}if(!e){e=S.handleEvent;f=S;d=d||{};d.rel=d.rel||0}else if(e in f){e=f[e]}l[a][c].push({attrs:d,tag:c,func:e,ctx:f})};S.onEvent=(function(){var d=function(a,b){if(!b)return 1;for(var n in b){var c=a.getAttribute(n);if(!c||(b[n]&&b[n].test&&!b[n].test(c))||(b[n]&&b[n]!=c)){return 0}}return 1};return function(e){e=e||window.event;if(!e.preventDefault){e.preventDefault=function(){e.returnValue=false};e.stopPropagation=function(){e.cancelBubble=true};e.target=e.srcElement;e.relatedTarget=(e.type=="mouseout")?e.toElement:e.fromElement}var a=l[e.type]||l["on"+e.type];var b=e.target;var c,o;do{c=a[m(b.tagName)]||[];for(var i=0;i<c.length;i++){if(d(b,c[i].attrs)){o=c[i];if(o.func.call(o.ctx,e,o)==true)return}}c=a["*"];if(c&&e.type!="mouseover"&&e.type!="mouseout"){for(var i=0;i<c.length;i++){if(d(b,c[i].attrs)){o=c[i];if(o.func.call(o.ctx,e,o)==true)return}}}}while((b=b.parentNode))}})();S.handleEvent=function(e){var p=(e.target.getAttribute("rel")||"").split(" ");var a=m(p[0]);if(!/^(get|get-nocache|post|put|delet[e])$/.test(a))return;var b=S.getURL(e.target)||"";var c=S.getForm(e.target);var d=e.target;var f;switch(p.length){case 1:break;case 2:d=p[1];break;case 3:if(p[1]!="#")b=S.mergeURLs(b,p[1]);d=p[2];break;case 4:if(p[1]!="#")b=S.mergeURLs(b,p[1]);d=p[2];f=p[3];break}if(d=="null")d=0;if(b){e.preventDefault();S.doAction(e,a,b,c,d,f)}};S.doAction=function(e,d,f,g,h,i){var j=i||(e&&/click|mousedown|mouseup|submit/.test(e.type));S.getURL(d,f,g,function(a,b,c){if(j)S.setBusy(0,i);if(b){if(h){if(t(h)){S.flash(h,240,function(){S.setNodeValue(h,a)})}else alert("Tag with id '"+f+"' not found.")}}else if(c){alert("Server Error: "+c.status+" "+c.statusText+"\nFor:"+f.replace(/^(.{70}).*$/,"$1..."))}});if(j)S.setBusy(1,i)};S.getURL=function(n){var a=m(n.tagName);if(a=="a"){return n.href}else if(/input|textarea|button|select|form/.test(a)){if(a!="form")n=n.form;return n.attributes["action"].value}};S.mergeURLs=(function(){var e=function(a,b){b=b||{};a=a.split("?")[1];if(a){var p=a.split("&"),q;for(var i=0;i<p.length;i++){q=p[i].split("=");b[q[0]]=q[1]||""}}return b};var f=function(a){var b=[];for(var i in a)b.push(i+"="+a[i]);return b.join("&")};return function(a,b){var c=b.charAt(0);if(c=="\/"){return b}else if(c=="?"){var d=f(e(b,e(a)));return a.split("?")[0]+"?"+d}else{var d=f(e(b,e(a)));a=a.substr(0,a.split("?")[0].lastIndexOf("\/")+1||a.length);return a+b.split("?")[0]+"?"+d}}})();S.getForm=function(n){var a=m(n.tagName);if(!n||!/input|button|textarea|form/.test(a))return;var o={};if(n.name){if(a=="button"||(a=="input"&&/button|submit/i.test(n.type))){o[n.name]=true}}var b=n.form||n;for(var i=0;i<b.elements.length;i++){var c=b.elements[i];if(c.disabled||!c.name)return;if(/select/i.test(c.tagName)){o[c.name]=[];for(var j=0;j<c.options.length;j++){var d=c.options[j];if(d.selected)o[c.name].push(d.value||d.text)}}else if(!/button|submit|reset|image/i.test(c.type)){o[c.name]=c.value}}return o};var u=(function(){var c={};return function(s){if(!c[s]){c[s]=document.body.appendChild(r("<scr"+"ipt><\/scr"+"ipt>")).src=s}}})();S.setNodeValue=function(d,e){d=t(d);var f=m(d.tagName);if(/input|textarea/.test(f)){d.value=e}else{var g="";var h=[];e=e.replace(/^<html[^>]*>|<\/html>$/g,"").replace(/<[s]cript([^>]*)>(.*?)<\/[s]cript>/ig,function(a,b,c){b=/\bdefer\b/i.test(b)?(/src=['"]?([^>'"\s]+)/i.exec(b)||{})[1]:0;if(b){h.push(b)}else{g+=c+";"}return""});var j=function(n){while(n.firstChild)n.removeChild(n.firstChild)};var k=function(n,c){while(n.firstChild)c.appendChild(n.firstChild)};if(f=="img"){d.src=e}else if(f=="select"){j(d);if(!/<option/i.test(e))e="<option>"+e+"<\/option>";var n=r("<select>"+e+"<\/select>");k(n,d)}else if(f=="table"){j(d);var n=r("<table>"+e+"<\/table>");k(n,d)}else if(f=="tr"){j(d);var n=r("<table><tr>"+e+"<\/tr><\/table>").rows[0];k(n,d)}else{d.innerHTML=e}if(g)setTimeout(g,0);for(var i=0;i<h.length;i++){u(h[i])}}};var y={};S.setBusy=function(a,b){b=t(b);if(!b){b=t("simpleajax-busy");if(!b){var d=document;var c=d.body.getAttribute("loading")||"Loading&hellip;";b=r("<div id='simpleajax-busy' style='position:fixed;top:0%;"+"left:50%;margin-left:-80px;padding:3px;background:#fd0;color:#000;"+"font-weight:bold;display:none;opacity:0.8;filter:alpha(opacity=80)'>"+c+"<\/div>");d.body.appendChild(b);var e=b.style;if(e.setExpression&&(!window.XMLHttpRequest||d.compatMode=="BackCompat")){var f=function(s){return"(document.body."+s+"||(document.documentElement||{})."+s+")"}e.setExpression("left",f("scrollLeft")+"+("+f("clientWidth")+"-this.offsetWidth)/2");e.setExpression("top",f("scrollTop"));e.margin="0";e.position="absolute"}}}var g=b.id||"*";y[g]=(y[g]||0)+(a?1:-1);var h=function(){b.style.display=(y[g]>0)?"":"none"};if(y[g]==1)setTimeout(h,300);else h();if(y[g]>1)S.flash(b,200)};S.flash=function(a,b,c){a=t(a);var v=S.css(a);v=parseFloat((/alpha\(opacity=(\d+)\)/i.exec(v.filter)||{})[1]/100||v.opacity||1);var d=function(n,v){n.style.opacity=v;n.style.filter="alpha(opacity="+Math.round(v*100)+")";n.style.zoom=1};S.anim(a,v,0,b,d,function(){S.anim(a,v,v,0,d,c)})};S.anim=function(b,c,d,e,f,g){var h=new Date().getTime();var P=Math.PI/2;var i=function(){f(b,c);if(c!=d){var a=new Date().getTime()-h;c=(a-e>=40)?d:c+Math.sin(a/e*P)*(d-c);setTimeout(i,40)}else if(g){g(b)}};i()};S.xhrCache={};S.getURL=function(b,c,f,g){b=m(b);if(/^data:/.test(c)){return g(unescape(c.replace(/^data:,?/,"")),1,null)}else if(/^#./.test(c)){var h=t(c.substr(1));return h?g(h.innerHTML,1,null):alert("Tag with id '"+c+"' not found.")}else if(b=="get"&&S.xhrCache[c]){return g(S.xhrCache[c],1,null)}if(b=="get-nocache"){c+=(/\?/.test(c)?"&":"?")+".r="+Math.random()}if(typeof f!="string"&&!(f instanceof String)){var s=[];for(var i in f)s.push(escape(i)+"="+escape(f[i]));f=s.join("&")}if(b=="post"){if(!f){f=c.substr(c.indexOf("?")+1,c.length);c=c.split("?")[0]}else{var j=(c.split("?")[1]||"").split("&");var d="&"+f;for(var i=0;i<j.length;i++){if(d.indexOf("&"+param[i].split("=")[0]+"=")==-1){f+="&"+param[i]}}}}var k=S.getXHR();k.open(b=="get-nocache"?"GET":b.toUpperCase(),c,true);k.setRequestHeader("X-Requested-With","XMLHttpRequest");if(b=="post"){k.setRequestHeader("Content-Type","application/x-www-form-urlencoded")}k.onreadystatechange=function(){if(k.readyState==4){var a=0,v;try{a=((k.status>=200&&k.status<300)||k.status==0||k.status==304||k.status==1223);v=k.responseText;if(b=="get")S.xhrCache[c]=v}catch(e){}g(v,a,k)}};k.send(f)};S.getXHR=function(){var a=[function(){return new XMLHttpRequest()},function(){return new ActiveXObject("Msxml2.XMLHTTP")},function(){return new ActiveXObject("Microsoft.XMLHTTP")}];for(var i=0;i<a.length;i++){try{var x=a[i]();S.getXHR=a[i];return x}catch(e){}}};S.register("onclick","a",{href:null});S.register("onclick","input",{type:"submit"});S.register("onclick","input",{type:"button"});S.register("onclick","button",{type:"submit"});S.register("onclick","button",{type:"button"});S.register("onchange","input",{type:"text"});S.register("onchange","select");S.register("onchange","textarea");S.register("obnsubmit","form");return S})({});